<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PTC Pabianice - Wydarzenia</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
<div class="wrapper">
    <div id="header"></div>
    <script>
        fetch("/partials/header.html")
            .then(response => response.text())
            .then(data => document.getElementById("header").innerHTML = data);
     </script>
  
  <!-- Results Section -->
  <main class="content">
    <!-- Replace the static list with a container -->
<section id="results" class="container">
    <h2>Wyniki</h2>
    <ul id="tournamentList"></ul>
  </section>
  
  <div id="tournamentModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>Szczegóły Turnieju</h3>
      <p id="tournamentDetails"></p>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const tournamentList = document.getElementById('tournamentList');
  
      // Fetch tournament data from the JSON file
  fetch("/data/results.json")
    .then(response => response.json())
    .then(data => {
      data.tournaments.forEach(tournament => {
        // Create list item
        const li = document.createElement('li');
        li.classList.add('tournament-item');

        // Create main tournament link (ptc/{id})
        const ptcLink = document.createElement('a');
        ptcLink.href = `ptc/${tournament.id}`;
        ptcLink.textContent = tournament.title;
        ptcLink.classList.add('tournament-link');

        // Create spider link
        const spiderLink = document.createElement('a');
        spiderLink.href = tournament.spider;
        spiderLink.textContent = "Pajączek";
        spiderLink.classList.add('spider-link');
        spiderLink.target = "_blank"; // open in new tab

        // Create date element
        const date = document.createElement('div');
        date.classList.add('tournament-date');
        date.textContent = tournament.date;

        // Append everything
        li.appendChild(ptcLink);
        li.appendChild(document.createTextNode(" | "));
        li.appendChild(spiderLink);
        li.appendChild(date);

        tournamentList.appendChild(li);
      });
    })
    .catch(error => console.error("Error loading tournament data:", error));
});
  </script>
  
  </main>
  
  <!-- Modal for Tournament Details -->
  <div id="tournamentModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>Szczegóły Turnieju</h3>
      <p id="tournamentDetails"></p>
    </div>
  </div>
  
  
  <div id="footer"></div>
  <script>
    fetch("/partials/footer.html")
      .then(response => response.text())
      .then(data => document.getElementById("footer").innerHTML = data);
  </script>
</div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Get modal elements
      var modal = document.getElementById("tournamentModal");
      var modalContent = document.getElementById("tournamentDetails");
      var closeBtn = document.querySelector(".close");
    
      // Dummy tournament data (replace or extend these with real details)
      var tournaments = {
        1: "Szczegóły dla Turnieju 1 - 10 marca 2025. Tutaj możesz dodać wyniki, statystyki i inne informacje.",
        2: "Szczegóły dla Turnieju 2 - 5 kwietnia 2025. Informacje o uczestnikach, wynikach i ciekawostki.",
        3: "Szczegóły dla Turnieju 3 - 20 maja 2025. Wyniki, podsumowanie turnieju oraz opinie uczestników."
      };
    
      // Add click event to all tournament links
      document.querySelectorAll('.tournament-link').forEach(function(link) {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          var tournamentId = this.getAttribute('data-tournament');
          modalContent.textContent = tournaments[tournamentId] || "Brak szczegółów dla tego turnieju.";
          modal.style.display = "block";
        });
      });
    
      // Close modal when the user clicks the close button
      closeBtn.addEventListener('click', function() {
        modal.style.display = "none";
      });
    
      // Close modal when clicking outside the modal content
      window.addEventListener('click', function(e) {
        if (e.target == modal) {
          modal.style.display = "none";
        }
      });
    });
    </script>
    
</body>
</html>
